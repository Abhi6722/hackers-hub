"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6190],{4137:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,f=d["".concat(u,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(f,i(i({ref:t},c),{},{components:n})):a.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8448:function(e,t,n){var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},7225:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(7462),r=n(7294),o=n(1048),i=n(2713);var l=function(){var e=(0,r.useContext)(i.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},u=n(3309),s=n(6010),c="tabItem_vU9c";function p(e){var t,n,a,o=e.lazy,i=e.block,p=e.defaultValue,d=e.values,m=e.groupId,f=e.className,h=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=d?d:h.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),k=(0,u.lx)(v,(function(e,t){return e.value===t.value}));if(k.length>0)throw new Error('Docusaurus error: Duplicate values "'+k.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===p?p:null!=(t=null!=p?p:null==(n=h.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(a=h[0])?void 0:a.props.value;if(null!==b&&!v.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var y=l(),g=y.tabGroupChoices,w=y.setTabGroupChoices,N=(0,r.useState)(b),C=N[0],S=N[1],O=[],E=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var T=g[m];null!=T&&T!==C&&v.some((function(e){return e.value===T}))&&S(T)}var x=function(e){var t=e.currentTarget,n=O.indexOf(t),a=v[n].value;a!==C&&(E(t),S(a),null!=m&&w(m,a))},j=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=O.indexOf(e.currentTarget)+1;n=O[a]||O[0];break;case"ArrowLeft":var r=O.indexOf(e.currentTarget)-1;n=O[r]||O[O.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":i},f)},v.map((function(e){var t=e.value,n=e.label;return r.createElement("li",{role:"tab",tabIndex:C===t?0:-1,"aria-selected":C===t,className:(0,s.Z)("tabs__item",c,{"tabs__item--active":C===t}),key:t,ref:function(e){return O.push(e)},onKeyDown:j,onFocus:x,onClick:x},null!=n?n:t)}))),o?(0,r.cloneElement)(h.filter((function(e){return e.props.value===C}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},h.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==C})}))))}function d(e){var t=(0,o.Z)();return r.createElement(p,(0,a.Z)({key:String(t)},e))}},2713:function(e,t,n){var a=(0,n(7294).createContext)(void 0);t.Z=a},6718:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return s},toc:function(){return c},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(4137)),i=(n(7225),n(8448),["components"]),l={id:"sauce-service",title:"Sauce Service",custom_edit_url:"https://github.com/webdriverio/webdriverio/edit/main/packages/wdio-sauce-service/README.md"},u=void 0,s={unversionedId:"sauce-service",id:"sauce-service",isDocsHomePage:!1,title:"Sauce Service",description:"WebdriverIO service that provides a better integration into Sauce Labs. This service can be used for:",source:"@site/docs/_sauce-service.md",sourceDirName:".",slug:"/sauce-service",permalink:"/docs/sauce-service",editUrl:"https://github.com/webdriverio/webdriverio/edit/main/packages/wdio-sauce-service/README.md",tags:[],version:"current",frontMatter:{id:"sauce-service",title:"Sauce Service",custom_edit_url:"https://github.com/webdriverio/webdriverio/edit/main/packages/wdio-sauce-service/README.md"},sidebar:"docs",previous:{title:"Firefox Profile Service",permalink:"/docs/firefox-profile-service"},next:{title:"Selenium Standalone Service",permalink:"/docs/selenium-standalone-service"}},c=[{value:"Installation",id:"installation",children:[],level:2},{value:"Configuration",id:"configuration",children:[],level:2},{value:"Sauce Service Options",id:"sauce-service-options",children:[{value:"maxErrorStackLength",id:"maxerrorstacklength",children:[],level:3},{value:"sauceConnect",id:"sauceconnect",children:[],level:3},{value:"sauceConnectOpts",id:"sauceconnectopts",children:[],level:3},{value:"uploadLogs",id:"uploadlogs",children:[],level:3},{value:"setJobName",id:"setjobname",children:[],level:3}],level:2},{value:"Overriding generated name metadata",id:"overriding-generated-name-metadata",children:[],level:2}],p={toc:c};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"WebdriverIO service that provides a better integration into Sauce Labs. This service can be used for:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"the Sauce Labs virtual machine cloud (desktop web and emu/simulators) and can update the job metadata ('name'*, 'passed', 'tags', 'public', 'build', 'custom-data') and runs Sauce Connect if desired."),(0,o.kt)("li",{parentName:"ul"},"the Sauce Labs Real Device cloud (iOS and Android) and can ",(0,o.kt)("strong",{parentName:"li"},"ONLY")," update the job status to passed / failed")),(0,o.kt)("p",null,"What else will this service do for you:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"By default the Sauce Service will update the 'name' of the job when the job starts. This will give you the option to update the name at any given point in time."),(0,o.kt)("li",{parentName:"ul"},"You can define a ",(0,o.kt)("inlineCode",{parentName:"li"},"setJobName")," parameter and customise the job name according to your capabilities, options and suite title"),(0,o.kt)("li",{parentName:"ul"},"The Sauce Service will also push the error stack of a failed test to the Sauce Labs commands tab"),(0,o.kt)("li",{parentName:"ul"},"It will allow you to automatically configure and spin up ",(0,o.kt)("a",{parentName:"li",href:"https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy"},"Sauce Connect")),(0,o.kt)("li",{parentName:"ul"},"And it will set context points in your command list to identify which commands were executed in what test")),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)("p",null,"The easiest way is to keep ",(0,o.kt)("inlineCode",{parentName:"p"},"@wdio/sauce-service")," as a devDependency in your ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),", via:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install @wdio/sauce-service --save-dev\n")),(0,o.kt)("p",null,"Instructions on how to install ",(0,o.kt)("inlineCode",{parentName:"p"},"WebdriverIO")," can be found ",(0,o.kt)("a",{parentName:"p",href:"https://webdriver.io/docs/gettingstarted"},"here.")),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"In order to use the service for the virtual machine and em/simulator cloud you need to set ",(0,o.kt)("inlineCode",{parentName:"p"},"user")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"key")," in your ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio.conf.js")," file. It will automatically use Sauce Labs to run your integration tests. If you run your tests on Sauce Labs you can specify the region you want to run your tests in via the ",(0,o.kt)("inlineCode",{parentName:"p"},"region")," property. Available short handles for regions are ",(0,o.kt)("inlineCode",{parentName:"p"},"us")," (default), ",(0,o.kt)("inlineCode",{parentName:"p"},"eu")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"apac"),". These regions are used for the Sauce Labs VM cloud and the Sauce Labs Real Device Cloud. If you don't provide the region, it defaults to ",(0,o.kt)("inlineCode",{parentName:"p"},"us"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"NOTE: By default the ",(0,o.kt)("inlineCode",{parentName:"p"},"ondemand.us-west-1.saucelabs.com")," US endpoint will be used. This is the new Unified Platform endpoint. If you want to use the ",(0,o.kt)("em",{parentName:"p"},"old")," endpoint then don't provide a region and add ",(0,o.kt)("inlineCode",{parentName:"p"},"hostname: ondemand.saucelabs.com")," to your configuration file.")),(0,o.kt)("p",null,"If you want WebdriverIO to automatically spin up a ",(0,o.kt)("a",{parentName:"p",href:"https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy"},"Sauce Connect")," tunnel, you just need to set ",(0,o.kt)("inlineCode",{parentName:"p"},"sauceConnect: true"),". If you would like to change data center to EU add ",(0,o.kt)("inlineCode",{parentName:"p"},"region:'eu'")," or APAC add ",(0,o.kt)("inlineCode",{parentName:"p"},"region:'apac'")," as US data center is set as default (region only works on ^4.14.1 or ^5.0.0)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// wdio.conf.js\nexport.config = {\n    // ...\n    user: process.env.SAUCE_USERNAME,\n    key: process.env.SAUCE_ACCESS_KEY,\n    region: 'us', // or 'eu' or 'apac'\n    services: [\n        ['sauce', {\n            sauceConnect: true,\n            sauceConnectOpts: {\n                // ...\n            }\n        }]\n    ],\n    // ...\n};\n")),(0,o.kt)("p",null,"If you want to use an existing Sauce Connect tunnel you only need to provide, or the ",(0,o.kt)("inlineCode",{parentName:"p"},"tunnelIdentifier"),", or if you are using a parent tunnel the ",(0,o.kt)("inlineCode",{parentName:"p"},"parentTunnel")," into you capabilites like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"export.config = {\n    // ...\n    {\n        browserName: 'chrome',\n        platformName: 'Windows 10',\n        browserVersion: 'latest',\n        // Sauce options can be found here https://wiki.saucelabs.com/display/DOCS/Test+Configuration+Options\n        'sauce:options': {\n            tunnelIdentifier: 'YourTunnelName',\n\n            // Example options\n            build: 'your-build-name',\n            screenResolution: '1600x1200',\n            // ...\n        },\n    },\n    // ...\n};\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"export.config = {\n    // ...\n    {\n        browserName: 'chrome',\n        platformName: 'Windows 10',\n        browserVersion: 'latest',\n        // Sauce options can be found here https://wiki.saucelabs.com/display/DOCS/Test+Configuration+Options\n        'sauce:options': {\n            tunnelIdentifier: 'ParentTunnelName',\n            parentTunnel: '<username of parent>,\n\n            // Example options\n            build: 'your-build-name',\n            screenResolution: '1600x1200',\n            // ...\n        },\n    },\n    // ...\n};\n")),(0,o.kt)("p",null,"If you want to use the Real Device cloud just pass the ",(0,o.kt)("inlineCode",{parentName:"p"},"testobject_api_key")," in the capabilities like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"capabilities = [\n    {\n        deviceName: 'iPhone XS',\n        // The api key that has a reference to the app-project in the RDC cloud\n        testobject_api_key: process.env.SAUCE_RDC_ACCESS_KEY,\n        // Some default settings\n        // You can find more info in the TO Appium Basic Setup section\n        platformName: 'iOS',\n        platformVersion: '11.4'\n    },\n]\n")),(0,o.kt)("h2",{id:"sauce-service-options"},"Sauce Service Options"),(0,o.kt)("p",null,"In order to authorize to the Sauce Labs service your config needs to contain a ",(0,o.kt)("a",{parentName:"p",href:"https://webdriver.io/docs/options#user"},(0,o.kt)("inlineCode",{parentName:"a"},"user"))," and ",(0,o.kt)("a",{parentName:"p",href:"https://webdriver.io/docs/options#key"},(0,o.kt)("inlineCode",{parentName:"a"},"key"))," option."),(0,o.kt)("h3",{id:"maxerrorstacklength"},"maxErrorStackLength"),(0,o.kt)("p",null,"This service will automatically push the error stack to Sauce Labs when a test fails. By default it will only push the first 5 lines, but if needed this can be changed. Be aware that more lines will result in more WebDriver calls which might slow down the execution."),(0,o.kt)("p",null,"Type: ",(0,o.kt)("inlineCode",{parentName:"p"},"number"),(0,o.kt)("br",null),"\nDefault: ",(0,o.kt)("inlineCode",{parentName:"p"},"5")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"(only for vm and or em/simulators)")),(0,o.kt)("h3",{id:"sauceconnect"},"sauceConnect"),(0,o.kt)("p",null,"If true it runs Sauce Connect and opens a secure connection between a Sauce Labs virtual machine running your browser tests."),(0,o.kt)("p",null,"Type: ",(0,o.kt)("inlineCode",{parentName:"p"},"Boolean"),(0,o.kt)("br",null),"\nDefault: ",(0,o.kt)("inlineCode",{parentName:"p"},"false")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"(only for vm and or em/simulators)")),(0,o.kt)("h3",{id:"sauceconnectopts"},"sauceConnectOpts"),(0,o.kt)("p",null,"Apply Sauce Connect options (e.g. to change port number or logFile settings). See ",(0,o.kt)("a",{parentName:"p",href:"https://wiki.saucelabs.com/display/DOCS/Sauce+Connect+Proxy+Command-Line+Quick+Reference+Guide"},"this list")," for more information. Per default the service disables SC proxy auto-detection as via ",(0,o.kt)("inlineCode",{parentName:"p"},"noAutodetect")," as this can be unreliable for some machines."),(0,o.kt)("p",null,"NOTE: When specifying the options the ",(0,o.kt)("inlineCode",{parentName:"p"},"--")," should be omitted. It can also be turned into camelCase (e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"shared-tunnel")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"sharedTunnel"),")."),(0,o.kt)("p",null,"Type: ",(0,o.kt)("inlineCode",{parentName:"p"},"Object"),(0,o.kt)("br",null),"\nDefault: ",(0,o.kt)("inlineCode",{parentName:"p"},"{ noAutodetect: true }")),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"(only for vm and or em/simulators)")),(0,o.kt)("h3",{id:"uploadlogs"},"uploadLogs"),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," this options uploads all WebdriverIO log files to the Sauce Labs platform for further inspection. Make sure you have ",(0,o.kt)("a",{parentName:"p",href:"https://webdriver.io/docs/options#outputdir"},(0,o.kt)("inlineCode",{parentName:"a"},"outputDir"))," set in your wdio config to write logs into files, otherwise data will be streamed to stdout and can't get uploaded."),(0,o.kt)("p",null,"Type: ",(0,o.kt)("inlineCode",{parentName:"p"},"Boolean"),(0,o.kt)("br",null),"\nDefault: ",(0,o.kt)("inlineCode",{parentName:"p"},"true")),(0,o.kt)("h3",{id:"setjobname"},"setJobName"),(0,o.kt)("p",null,"Allows users to dynamically set the job name based on worker parameters such as WebdriverIO configuration, used capabilities and the original suite title."),(0,o.kt)("p",null,"Type: ",(0,o.kt)("inlineCode",{parentName:"p"},"Function"),(0,o.kt)("br",null),"\nDefault: ",(0,o.kt)("inlineCode",{parentName:"p"},"(config, capabilities, suiteTitle) => suiteTitle")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"overriding-generated-name-metadata"},"Overriding generated name metadata"),(0,o.kt)("p",null,"The service automatically generates a name for each test from the suite name, browser name and other information."),(0,o.kt)("p",null,"You can override this by providing a value for the ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," desired capability, but this will have the side effect of giving all tests the same name."),(0,o.kt)("hr",null),(0,o.kt)("p",null,"For more information on WebdriverIO see the ",(0,o.kt)("a",{parentName:"p",href:"https://webdriver.io"},"homepage"),"."))}d.isMDXComponent=!0}}]);