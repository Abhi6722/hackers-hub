"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4914],{4137:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return d}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),c=u(r),d=o,h=c["".concat(s,".").concat(d)]||c[d]||m[d]||a;return r?n.createElement(h,l(l({ref:t},p),{},{components:r})):n.createElement(h,l({ref:t},p))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,l=new Array(a);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var u=2;u<a;u++)l[u]=r[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8448:function(e,t,r){var n=r(7294);t.Z=function(e){var t=e.children,r=e.hidden,o=e.className;return n.createElement("div",{role:"tabpanel",hidden:r,className:o},t)}},7225:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(7462),o=r(7294),a=r(1048),l=r(2713);var i=function(){var e=(0,o.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=r(3309),u=r(6010),p="tabItem_vU9c";function m(e){var t,r,n,a=e.lazy,l=e.block,m=e.defaultValue,c=e.values,d=e.groupId,h=e.className,f=o.Children.map(e.children,(function(e){if((0,o.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=c?c:f.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),w=(0,s.lx)(k,(function(e,t){return e.value===t.value}));if(w.length>0)throw new Error('Docusaurus error: Duplicate values "'+w.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var v=null===m?m:null!=(t=null!=m?m:null==(r=f.find((function(e){return e.props.default})))?void 0:r.props.value)?t:null==(n=f[0])?void 0:n.props.value;if(null!==v&&!k.some((function(e){return e.value===v})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+v+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var g=i(),b=g.tabGroupChoices,N=g.setTabGroupChoices,y=(0,o.useState)(v),j=y[0],C=y[1],R=[],O=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=d){var T=b[d];null!=T&&T!==j&&k.some((function(e){return e.value===T}))&&C(T)}var E=function(e){var t=e.currentTarget,r=R.indexOf(t),n=k[r].value;n!==j&&(O(t),C(n),null!=d&&N(d,n))},D=function(e){var t,r=null;switch(e.key){case"ArrowRight":var n=R.indexOf(e.currentTarget)+1;r=R[n]||R[0];break;case"ArrowLeft":var o=R.indexOf(e.currentTarget)-1;r=R[o]||R[R.length-1]}null==(t=r)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,u.Z)("tabs",{"tabs--block":l},h)},k.map((function(e){var t=e.value,r=e.label;return o.createElement("li",{role:"tab",tabIndex:j===t?0:-1,"aria-selected":j===t,className:(0,u.Z)("tabs__item",p,{"tabs__item--active":j===t}),key:t,ref:function(e){return R.push(e)},onKeyDown:D,onFocus:E,onClick:E},null!=r?r:t)}))),a?(0,o.cloneElement)(f.filter((function(e){return e.props.value===j}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==j})}))))}function c(e){var t=(0,a.Z)();return o.createElement(m,(0,n.Z)({key:String(t)},e))}},2713:function(e,t,r){var n=(0,r(7294).createContext)(void 0);t.Z=n},8842:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return c}});var n=r(7462),o=r(3366),a=(r(7294),r(4137)),l=(r(7225),r(8448),["components"]),i={id:"wdio-mochawesome-reporter",title:"Mochawesome Reporter",custom_edit_url:"https://github.com/fijijavis/wdio-mochawesome-reporter/edit/master//README.md"},s=void 0,u={unversionedId:"wdio-mochawesome-reporter",id:"wdio-mochawesome-reporter",isDocsHomePage:!1,title:"Mochawesome Reporter",description:"wdio-mochawesome-reporter is a 3rd party package, for more information please see GitHub | npm",source:"@site/docs/_wdio-mochawesome-reporter.md",sourceDirName:".",slug:"/wdio-mochawesome-reporter",permalink:"/docs/wdio-mochawesome-reporter",editUrl:"https://github.com/fijijavis/wdio-mochawesome-reporter/edit/master//README.md",tags:[],version:"current",frontMatter:{id:"wdio-mochawesome-reporter",title:"Mochawesome Reporter",custom_edit_url:"https://github.com/fijijavis/wdio-mochawesome-reporter/edit/master//README.md"},sidebar:"docs",previous:{title:"JSON Reporter",permalink:"/docs/wdio-json-reporter"},next:{title:"Timeline Reporter",permalink:"/docs/wdio-timeline-reporter"}},p=[{value:"WDIO Version Compatibility",id:"wdio-version-compatibility",children:[],level:2},{value:"Installation",id:"installation",children:[],level:2},{value:"Configuration",id:"configuration",children:[{value:"Results to STDOUT",id:"results-to-stdout",children:[],level:3},{value:"Results to File",id:"results-to-file",children:[],level:3},{value:"Results to File with custom file name",id:"results-to-file-with-custom-file-name",children:[],level:3}],level:2},{value:"Result Files",id:"result-files",children:[{value:"Command line",id:"command-line",children:[],level:3},{value:"As part of a wdio hook",id:"as-part-of-a-wdio-hook",children:[],level:3}],level:2},{value:"Installation",id:"installation-1",children:[],level:2},{value:"Using",id:"using",children:[],level:2},{value:"Reporter Configurations",id:"reporter-configurations",children:[],level:2},{value:"Version Compatibility",id:"version-compatibility",children:[],level:2}],m={toc:p};function c(e){var t=e.components,r=(0,o.Z)(e,l);return(0,a.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"wdio-mochawesome-reporter is a 3rd party package, for more information please see ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/fijijavis/wdio-mochawesome-reporter"},"GitHub")," | ",(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/wdio-mochawesome-reporter"},"npm"))),(0,a.kt)("p",null,"Generates test results in the json formated needed to create ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/adamgruber/mochawesome"},"Mochawesome")," reports."),(0,a.kt)("h2",{id:"wdio-version-compatibility"},"WDIO Version Compatibility"),(0,a.kt)("p",null,"There are breaking changes between WDIO v4 and v5 with how custom reporters work.  The chart below shows the versions of this reporter and their WDIO compatibility version."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"WDIO Json Reporter"),(0,a.kt)("th",{parentName:"tr",align:null},"WDIO"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"<= 2.0.1"),(0,a.kt)("td",{parentName:"tr",align:null},"v4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},">= 3.0.0"),(0,a.kt)("td",{parentName:"tr",align:null},"v5")))),(0,a.kt)("h1",{id:"wdio-v5-compatibility"},"WDIO v5 Compatibility"),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"NPM")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm install wdio-mochawesome-reporter --save-dev\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Yarn")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add wdio-mochawesome-reporter --dev\n")),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("h3",{id:"results-to-stdout"},"Results to STDOUT"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"reporters: [\n  'dot',\n  ['mochawesome',{ stdout: true }]\n],\n")),(0,a.kt)("h3",{id:"results-to-file"},"Results to File"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"reporters: [\n  'dot',\n  ['mochawesome',{\n      outputDir: './Results'\n  }]\n],\n")),(0,a.kt)("h3",{id:"results-to-file-with-custom-file-name"},"Results to File with custom file name"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"reporters: [\n  'dot',\n  ['mochawesome',{\n    outputDir: './Results',\n    outputFileFormat: function(opts) { \n        return `results-${opts.cid}.${opts.capabilities}.json`\n    }\n  }]\n],\n")),(0,a.kt)("h2",{id:"result-files"},"Result Files"),(0,a.kt)("p",null,'With WDIO v5, reporting has moved from a centralized process to one that is handled by each of the "sessions" spun up for parallel test execution.',(0,a.kt)("br",{parentName:"p"}),"\n","This change helped reduce the amount of chatter during WDIO test execution and thus improved performance.  The downside is we are no longer able\nto get a single report for ALL test execution.  Consider the following:"),(0,a.kt)("p",null,"2 suites of tests configured to run in 2 browsers:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"WDIO v4: 1 json file with execution results"),(0,a.kt)("li",{parentName:"ul"},"WDIO v5: 4 json files with execution results")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"wdio-mochawesome-reporter")," provides a utility function to merge the multiple json files into a single file.  You can Follow the steps below to take advantage of the utility."),(0,a.kt)("h3",{id:"command-line"},"Command line"),(0,a.kt)("p",null,"1) Create a small node script"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"const mergeResults = require('wdio-mochawesome-reporter/mergeResults')\nmergeResults()\n")),(0,a.kt)("p",null,"2) Call node script from command line and pass 2 arguments"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"<RESULTS_DIR>: Directory where results files are written"),(0,a.kt)("li",{parentName:"ul"},"<FILE_REGEX>: Regex pattern for finding ",(0,a.kt)("inlineCode",{parentName:"li"},"wdio-mochawesome-reporter")," result files in <RESULTS_DIR>.  This is necessary because multiple reporters produce ",(0,a.kt)("inlineCode",{parentName:"li"},"json")," result files")),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'node mergeResults.js ./Results "wdio-mochawesome-*"\n')),(0,a.kt)("h3",{id:"as-part-of-a-wdio-hook"},"As part of a wdio hook"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"onComplete")," is a great place to call the ",(0,a.kt)("inlineCode",{parentName:"p"},"mergeResults")," script. Usage this way requires passing in the results directory and the file pattern as arguments to the script."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"// Located in your wdio.conf.js file\nonComplete: function (exitCode, config, capabilities, results) {\n  const mergeResults = require('wdio-mochawesome-reporter/mergeResults')\n  mergeResults('./Results', \"results-*\")\n}\n")),(0,a.kt)("p",null,"Upon completion, the merge script will output a single json file named ",(0,a.kt)("inlineCode",{parentName:"p"},"wdio-ma-merged.json")," in the provided <RESULTS_DIR>"),(0,a.kt)("h1",{id:"wdio-v4-compatibility"},"WDIO v4 Compatibility"),(0,a.kt)("h2",{id:"installation-1"},"Installation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"NPM")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm install wdio-mochawesome-reporter@^2.0.1 --save \n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Yarn")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add wdio-mochawesome-reporter@^2.0.1 --dev\n")),(0,a.kt)("h2",{id:"using"},"Using"),(0,a.kt)("p",null," Add ",(0,a.kt)("inlineCode",{parentName:"p"},"mochawesome")," to the reporters array in your wdio config file."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// sample wdio.conf.js\nmodule.exports = {\n  // ...\n  reporters: ['dot', 'mochawesome'],\n  // ...\n};\n")),(0,a.kt)("h2",{id:"reporter-configurations"},"Reporter Configurations"),(0,a.kt)("p",null,"The following configuration options are supported:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"option"),(0,a.kt)("th",{parentName:"tr",align:null},"default"),(0,a.kt)("th",{parentName:"tr",align:null},"description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"includeScreenshots"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"All screenshots captured during test execution will be embedded in the report")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"screenshotUseRelativePath"),(0,a.kt)("td",{parentName:"tr",align:null},"false"),(0,a.kt)("td",{parentName:"tr",align:null},"By default sreenshots embeded in a report use an absolute path.  Set this option to true and have screenshot paths be relative to the mochawesome report folder.  This is useful if you want to publish the report to a static web server or zip it as a complete artifact of a build")))),(0,a.kt)("p",null,"To use a configuration option add a ",(0,a.kt)("inlineCode",{parentName:"p"},"mochawesomeOpts")," section to your wdio config.  Then add any options."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// sample wdio.conf.js\nmodule.exports = {\n  // ...\n  reporters: ['dot', 'mochawesome'],\n  mochawesomeOpts: {\n      includeScreenshots:true,\n      screenshotUseRelativePath:true\n  },\n  // ...\n};\n")),(0,a.kt)("h1",{id:"mochawesome-report-generator"},"Mochawesome Report Generator"),(0,a.kt)("p",null,"To convert the json generated by this package into a Mochawesome report you will need to use the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/adamgruber/mochawesome-report-generator"},"Mochawesome Report Generator"),"."),(0,a.kt)("p",null,"In summary..."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Add the package to your project")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yarn add mochawesome-report-generator --dev\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Add a script to your package.json to generate the report")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'  "scripts": {\n    "generateMochawesome":"marge path/to/results.json --reportTitle \'My Project Results\'"\n  },\n')),(0,a.kt)("p",null,"1) ",(0,a.kt)("inlineCode",{parentName:"p"},"path/to/results.json")," = path and name of json file\n2) ",(0,a.kt)("inlineCode",{parentName:"p"},"--reportTitle 'My Project Results'")," = unique report title"),(0,a.kt)("h2",{id:"version-compatibility"},"Version Compatibility"),(0,a.kt)("p",null,"v1.x of ",(0,a.kt)("inlineCode",{parentName:"p"},"wdio-mochawesome-reporter")," is compatible with ",(0,a.kt)("inlineCode",{parentName:"p"},"2.3.2")," of ",(0,a.kt)("inlineCode",{parentName:"p"},"mochawesome-report-generator")),(0,a.kt)("p",null,"v2.x of ",(0,a.kt)("inlineCode",{parentName:"p"},"wdio-mochawesome-reporter")," is compatible with version ",(0,a.kt)("inlineCode",{parentName:"p"},"3.1.5")," of ",(0,a.kt)("inlineCode",{parentName:"p"},"mochawesome-report-generator")),(0,a.kt)("p",null,"v3.x of ",(0,a.kt)("inlineCode",{parentName:"p"},"wdio-mochawesome-reporter")," is compatible with version ",(0,a.kt)("inlineCode",{parentName:"p"},"3.1.5")," of ",(0,a.kt)("inlineCode",{parentName:"p"},"mochawesome-report-generator")))}c.isMDXComponent=!0}}]);