"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[740],{4137:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return h}});var r=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,a=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=s,f=d["".concat(l,".").concat(h)]||d[h]||p[h]||a;return n?r.createElement(f,o(o({ref:t},u),{},{components:n})):r.createElement(f,o({ref:t},u))}));function h(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=n.length,o=new Array(a);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,o[1]=i;for(var c=2;c<a;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2102:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return c},assets:function(){return u},toc:function(){return p},default:function(){return h}});var r=n(7462),s=n(3366),a=(n(7294),n(4137)),o=["components"],i={title:"Grouping Specs for Execution in a Single Instance",author:"Ross Addinall",authorURL:"http://twitter.com/rossaddinall",authorImageURL:"https://s.gravatar.com/avatar/340d9dcc2c732de725ea9d94bdfcfe82?s=80"},l=void 0,c={permalink:"/blog/2021/03/23/grouping-specs",editUrl:"https://github.com/Abhi6722/hackers-hub/edit/main/website/blog/blog/2021-03-23-grouping-specs.md",source:"@site/blog/2021-03-23-grouping-specs.md",title:"Grouping Specs for Execution in a Single Instance",description:"Until now, WebdriverIO has created a separate instance to run each of the spec files. So, if we have a directory structure that looks something like this:",date:"2021-03-23T00:00:00.000Z",formattedDate:"March 23, 2021",tags:[],readingTime:2.36,truncated:!1,authors:[{name:"Ross Addinall",url:"http://twitter.com/rossaddinall",imageURL:"https://s.gravatar.com/avatar/340d9dcc2c732de725ea9d94bdfcfe82?s=80"}],prevItem:{title:"WebdriverIO Opens an OpenCollective",permalink:"/blog/2021/03/31/open-collective"},nextItem:{title:"WebdriverIO v7 Released",permalink:"/blog/2021/02/09/webdriverio-v7-released"}},u={authorsImageUrls:[void 0]},p=[],d={toc:p};function h(e){var t=e.components,n=(0,s.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Until now, WebdriverIO has created a separate instance to run each of the spec files. So, if we have a directory structure that looks something like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"test\n \u2514\u2500\u2500\u2500 specs\n         \u2502  test_login.js\n         \u2502  test_product_order.js\n         \u2502  test_checkout.js\n         \u2502  test_b1.js\n         \u2502  test_b2.js\n")),(0,a.kt)("p",null,"and the config file has specs defined as follows:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},"    \"specs\": [\n        './test/specs/test*.js'\n    ],\n")),(0,a.kt)("p",null,'then when WebdriverIO is run, the specs definition will be expanded to create a list of all the test files, and a separate instance will be created to run each test (up to the value of "maxInstances").  Remaining tests will be queued until tests complete.  Consequently, each test is run in its own instance.'),(0,a.kt)("p",null,"This model has many advantages.  It means that tests can be run in parallel and makes it easier to retry tests that fail etc."),(0,a.kt)("p",null,"However, there are cases where this does not work so well.  In one case a users flow involved transpiling tens of thousands of Typescript files for each of the ~250 test files, resulting in a huge overhead in the speed of the testing.  In another case a remote device farm was provisioning a new device for each test with all the associated setup thereby impacting performance and cost."),(0,a.kt)("p",null,"At ",(0,a.kt)("a",{parentName:"p",href:"https://www.vitaq.io"},"Vertizan")," we are integrating our AI-driven and functional coverage-led Vitaq test automation tool with WebdriverIO and Mocha. For Vitaq AI to work, it needs to be able to select which test/action to run next and that requires having all of the tests available in a single instance."),(0,a.kt)("p",null,"Consequently, we have worked with the WebdriverIO team to implement a syntax which allows the user to specify which tests should be grouped together for execution in the same instance.  All of the three test execution frameworks (Mocha, Jasmine, Cucumber) are supported by this approach, and by default they will run the tests sequentially."),(0,a.kt)("p",null,"To take advantage of this capability, the definition of the specs in the WDIO config file has been extended so that it can now accept arrays within the specs array. All of the files within an inner array are grouped together and run in the same instance."),(0,a.kt)("p",null,"So, the following specs definition:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'    "specs": [\n        [\n            "./test/specs/test_login.js",\n            "./test/specs/test_product_order.js",\n            "./test/specs/test_checkout.js"\n        ],\n        "./test/specs/test_b*.js",\n    ],\n')),(0,a.kt)("p",null,"when run against the previously described directory tree would result in three instances:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"One instance would run the group of test_login.js, test_product_order.js and test_checkout.js"),(0,a.kt)("li",{parentName:"ul"},"Another instance would run test_b1.js"),(0,a.kt)("li",{parentName:"ul"},"A final instance would run test_b2.js")),(0,a.kt)("p",null,"It is only the specs definition that supports this syntax."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"EDIT:"),"\nThis syntax has now been extended to support specs defined in suites, so you can now also define suites like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'    "suites": {\n        end2end: [\n            [\n                "./test/specs/test_login.js",\n                "./test/specs/test_product_order.js",\n                "./test/specs/test_checkout.js"\n            ]\n        ],\n        allb: ["./test/specs/test_b*.js"]\n},\n')),(0,a.kt)("p",null,'and in this case all of the tests of the "end2end" suite would be run in a single instance.'))}h.isMDXComponent=!0}}]);