"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2798],{4137:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return d}});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(a),d=o,h=u["".concat(l,".").concat(d)]||u[d]||m[d]||i;return a?n.createElement(h,r(r({ref:t},p),{},{components:a})):n.createElement(h,r({ref:t},p))}));function d(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},8448:function(e,t,a){var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,o=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:o},t)}},7225:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(7462),o=a(7294),i=a(1048),r=a(2713);var s=function(){var e=(0,o.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},l=a(3309),c=a(6010),p="tabItem_vU9c";function m(e){var t,a,n,i=e.lazy,r=e.block,m=e.defaultValue,u=e.values,d=e.groupId,h=e.className,b=o.Children.map(e.children,(function(e){if((0,o.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=u?u:b.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),w=(0,l.lx)(g,(function(e,t){return e.value===t.value}));if(w.length>0)throw new Error('Docusaurus error: Duplicate values "'+w.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===m?m:null!=(t=null!=m?m:null==(a=b.find((function(e){return e.props.default})))?void 0:a.props.value)?t:null==(n=b[0])?void 0:n.props.value;if(null!==k&&!g.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var v=s(),f=v.tabGroupChoices,N=v.setTabGroupChoices,y=(0,o.useState)(k),T=y[0],S=y[1],O=[],C=(0,l.o5)().blockElementScrollPositionUntilNextRender;if(null!=d){var E=f[d];null!=E&&E!==T&&g.some((function(e){return e.value===E}))&&S(E)}var I=function(e){var t=e.currentTarget,a=O.indexOf(t),n=g[a].value;n!==T&&(C(t),S(n),null!=d&&N(d,n))},x=function(e){var t,a=null;switch(e.key){case"ArrowRight":var n=O.indexOf(e.currentTarget)+1;a=O[n]||O[0];break;case"ArrowLeft":var o=O.indexOf(e.currentTarget)-1;a=O[o]||O[O.length-1]}null==(t=a)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.Z)("tabs",{"tabs--block":r},h)},g.map((function(e){var t=e.value,a=e.label;return o.createElement("li",{role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,className:(0,c.Z)("tabs__item",p,{"tabs__item--active":T===t}),key:t,ref:function(e){return O.push(e)},onKeyDown:x,onFocus:I,onClick:I},null!=a?a:t)}))),i?(0,o.cloneElement)(b.filter((function(e){return e.props.value===T}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},b.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==T})}))))}function u(e){var t=(0,i.Z)();return o.createElement(m,(0,n.Z)({key:String(t)},e))}},2713:function(e,t,a){var n=(0,a(7294).createContext)(void 0);t.Z=n},8955:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var n=a(7462),o=a(3366),i=(a(7294),a(4137)),r=(a(7225),a(8448),["components"]),s={id:"wdio-image-comparison-service",title:"Image Comparison (Visual Regression Testing) Service",custom_edit_url:"https://github.com/wswebcreation/wdio-image-comparison-service/edit/master//README.md"},l=void 0,c={unversionedId:"wdio-image-comparison-service",id:"wdio-image-comparison-service",isDocsHomePage:!1,title:"Image Comparison (Visual Regression Testing) Service",description:"wdio-image-comparison-service is a 3rd party package, for more information please see GitHub | npm",source:"@site/docs/_wdio-image-comparison-service.md",sourceDirName:".",slug:"/wdio-image-comparison-service",permalink:"/docs/wdio-image-comparison-service",editUrl:"https://github.com/wswebcreation/wdio-image-comparison-service/edit/master//README.md",tags:[],version:"current",frontMatter:{id:"wdio-image-comparison-service",title:"Image Comparison (Visual Regression Testing) Service",custom_edit_url:"https://github.com/wswebcreation/wdio-image-comparison-service/edit/master//README.md"},sidebar:"docs",previous:{title:"LambdaTest Service",permalink:"/docs/wdio-lambdatest-service"},next:{title:"Ng-apimock Service",permalink:"/docs/wdio-ng-apimock-service"}},p=[{value:"IMPORTANT!",id:"important",children:[],level:2},{value:"What can it do?",id:"what-can-it-do",children:[],level:2},{value:"Installation",id:"installation",children:[],level:2},{value:"Usage",id:"usage",children:[{value:"Configuration",id:"configuration",children:[],level:3},{value:"Writing tests",id:"writing-tests",children:[],level:3},{value:"WebdriverIO MultiRemote",id:"webdriverio-multiremote",children:[],level:3},{value:"Running Programmatically",id:"running-programmatically",children:[],level:3},{value:"Test result outputs",id:"test-result-outputs",children:[],level:3},{value:"Tabbing through a website",id:"tabbing-through-a-website",children:[{value:"How does it work",id:"how-does-it-work",children:[{value:"Options",id:"options",children:[],level:5}],level:4},{value:"Example",id:"example",children:[],level:4}],level:3},{value:"DEV-TOOLS support",id:"dev-tools-support",children:[],level:3},{value:"Typescript support",id:"typescript-support",children:[],level:3}],level:2},{value:"FAQ",id:"faq",children:[{value:"Do I need to use a <code>save(Screen/Element/FullPageScreen)</code> methods when I want to run <code>check(Screen/Element/FullPageScreen)</code>?",id:"do-i-need-to-use-a-savescreenelementfullpagescreen-methods-when-i-want-to-run-checkscreenelementfullpagescreen",children:[],level:3},{value:"Width and height cannot be negative",id:"width-and-height-cannot-be-negative",children:[],level:3},{value:"Installation of Canvas on Windows failed with Node-Gyp logs",id:"installation-of-canvas-on-windows-failed-with-node-gyp-logs",children:[],level:3}],level:2},{value:"Contribution",id:"contribution",children:[],level:2},{value:"TODO:",id:"todo",children:[],level:2},{value:"Credits",id:"credits",children:[],level:2}],m={toc:p};function u(e){var t=e.components,a=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"wdio-image-comparison-service is a 3rd party package, for more information please see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service"},"GitHub")," | ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/wdio-image-comparison-service"},"npm"))),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://david-dm.org/wswebcreation/wdio-image-comparison-service"},(0,i.kt)("img",{parentName:"a",src:"https://david-dm.org/wswebcreation/wdio-image-comparison-service/status.svg",alt:"dependencies Status"})),"\n",(0,i.kt)("img",{parentName:"p",src:"https://github.com/wswebcreation/wdio-image-comparison-service/actions/workflows/wdio-image-comparison-service.yml/badge.svg",alt:"wdio-image-comparison workflow"}),"\n",(0,i.kt)("a",{parentName:"p",href:"https://codecov.io/gh/wswebcreation/wdio-image-comparison-service"},(0,i.kt)("img",{parentName:"a",src:"https://codecov.io/gh/wswebcreation/wdio-image-comparison-service/branch/master/graph/badge.svg?token=6zGW0ccdqR",alt:"codecov"})),"\n",(0,i.kt)("a",{parentName:"p",href:"https://app.eu-central-1.saucelabs.com/u/wdio-image-comparison-service"},(0,i.kt)("img",{parentName:"a",src:"https://app.eu-central-1.saucelabs.com/buildstatus/wdio-image-comparison-service",alt:"Build Status"})),"\n",(0,i.kt)("a",{parentName:"p",href:"https://nodei.co/npm/wdio-image-comparison-service/"},(0,i.kt)("img",{parentName:"a",src:"https://nodei.co/npm/wdio-image-comparison-service.png",alt:"NPM"}))),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://app.eu-central-1.saucelabs.com/u/wdio-image-comparison-service"},(0,i.kt)("img",{parentName:"a",src:"https://app.eu-central-1.saucelabs.com/browser-matrix/wdio-image-comparison-service.svg",alt:"Browser Status"}))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"NOTE for Windows users!!",(0,i.kt)("br",null)),"\nPlease check the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./README.md#faq"},"FAQ"))),(0,i.kt)("h2",{id:"important"},"IMPORTANT!"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"This module will execute a ",(0,i.kt)("strong",{parentName:"li"},"pixel-by-pixel")," comparison for you. There are some things you can change during comparison, see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/wswebcreation/webdriver-image-comparison/blob/master/docs/OPTIONS.md#plugin-options"},"here")," but it stays a basic ",(0,i.kt)("strong",{parentName:"li"},"pixel-by-pixel")," comparison. ",(0,i.kt)("br",null)," This means that if for example Chrome updates to a newer version, you might need to change your baseline due to fontrendering differences."),(0,i.kt)("li",{parentName:"ol"},"Secondly you can only execute visual comparison on screenshots that have been taken with the same platform. For example, the screenshot on a Mac with Chrome can't be used to compare the same page on a Ubuntu or Windows with Chrome. ",(0,i.kt)("br",null),(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("em",{parentName:"strong"},"You need to compare Apples with Apples, not Apples with Windows"))),(0,i.kt)("li",{parentName:"ol"},"Try to prevent accepting a ",(0,i.kt)("inlineCode",{parentName:"li"},"missmatch percentage"),". You never know what you accept and especially with large screenshots you might accept a button not being rendered and or shown on a page."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"DONT' TRY TO MIMIC MOBILE SCREENSIZES BY RESIZING YOUR BROWSER AND SAY IT'S A CHROME OR SAFARI MOBILE BROWSER!!!!")," This module is there to compare visuals of what you're user would see. A resized Chrome or Safari is not equal to what your enduser is using on his mobile phone. Web-pages and so on a desktop browser CAN'T be compared with mobile browsers due to different font, html and JS-rendering."),(0,i.kt)("li",{parentName:"ol"},"In my humble opinion it's useless to use this module with headless browsers and I will also NOT support any issues as a result of headless browsers. Reason is that an enduser is not using a headless browser \ud83d\ude09")),(0,i.kt)("h2",{id:"what-can-it-do"},"What can it do?"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"wdio-image-comparison-service")," is a lightweight ",(0,i.kt)("em",{parentName:"p"},"WebdriverIO")," service for browsers / mobile browsers / hybrid apps to do image comparison on screens, elements or full page screens."),(0,i.kt)("p",null,"You can:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"save or compare screens / elements / full page screens against a baseline"),(0,i.kt)("li",{parentName:"ul"},"automatically create a baseline when no baseline is there"),(0,i.kt)("li",{parentName:"ul"},"blockout custom regions and even automatically exclude a status and or tool bars (mobile only) during a comparison"),(0,i.kt)("li",{parentName:"ul"},"increase the element dimensions screenshots"),(0,i.kt)("li",{parentName:"ul"},"use different comparison methods"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"NEW:")," We now support Puppeteer with WebdriverIO"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"NEW:")," You can now verify how your website will support tabbing with your keyboard, see also ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./README.md#tabbing-through-a-website"},"here")),(0,i.kt)("li",{parentName:"ul"},"and much more, see the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/OPTIONS.md"},"options here"))),(0,i.kt)("p",null,"The module is now based on the power of the new ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/webdriver-image-comparison"},(0,i.kt)("inlineCode",{parentName:"a"},"webdriver-image-comparison"))," module. This is a lightweight module to retrieve the needed data and screenshots for all browsers / devices.\nThe comparison power comes from ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Huddle/Resemble.js"},"ResembleJS"),". If you want to compare images online you can check the ",(0,i.kt)("a",{parentName:"p",href:"http://rsmbl.github.io/Resemble.js/"},"online tool")),(0,i.kt)("p",null,"It can be used for:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"desktop browsers (Chrome / Firefox / Safari / Internet Explorer 11 / Microsoft Edge)"),(0,i.kt)("li",{parentName:"ul"},"mobile / tablet browsers (Chrome / Safari on emulators / real devices) via Appium"),(0,i.kt)("li",{parentName:"ul"},"Hybrid apps via Appium")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"NOTE for Hybrid!!",(0,i.kt)("br",null)),"\nPlease use the property ",(0,i.kt)("inlineCode",{parentName:"p"},"isHybridApp:true")," in your service settings")),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("p",null,"Install this module locally with the following command to be used as a (dev-)dependency:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"npm install --save wdio-image-comparison-service\nnpm install --save-dev wdio-image-comparison-service\n")),(0,i.kt)("p",null,"Instructions on how to install ",(0,i.kt)("inlineCode",{parentName:"p"},"WebdriverIO")," can be found ",(0,i.kt)("a",{parentName:"p",href:"http://webdriver.io/guide/getstarted/install.html"},"here.")),(0,i.kt)("h2",{id:"usage"},"Usage"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"wdio-image-comparison-service")," supports NodeJS 8 or higher"))),(0,i.kt)("h3",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"wdio-image-comparison-service")," is a service so it can be used as a normal service. You can set it up in your ",(0,i.kt)("inlineCode",{parentName:"p"},"wdio.conf.js")," file with the following"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const { join } = require('path');\n// wdio.conf.js\nexports.config = {\n    // ...\n    // =====\n    // Setup\n    // =====\n    services: [\n        ['image-comparison',\n        // The options\n        {\n            // Some options, see the docs for more\n            baselineFolder: join(process.cwd(), './tests/sauceLabsBaseline/'),\n            formatImageName: '{tag}-{logName}-{width}x{height}',\n            screenshotPath: join(process.cwd(), '.tmp/'),\n            savePerInstance: true,\n            autoSaveBaseline: true,\n            blockOutStatusBar: true,\n            blockOutToolBar: true,\n            // NOTE: When you are testing a hybrid app please use this setting\n            isHybridApp: true,\n            // Options for the tabbing image\n            tabbableOptions:{\n                circle:{\n                    size: 18,\n                    fontSize: 18,\n                    // ...\n                },\n                line:{\n                    color: '#ff221a', // hex-code or for example words like `red|black|green`\n                    width: 3,\n                },\n            }\n            // ... more options\n        }],\n    ],\n    // ...\n};\n")),(0,i.kt)("p",null,"More plugin options can be found ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/OPTIONS.md#plugin-options"},"here"),"."),(0,i.kt)("h3",{id:"writing-tests"},"Writing tests"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"wdio-image-comparison-service")," is framework agnostic, meaning that you can use it with all the frameworks WebdriverIO supports like ",(0,i.kt)("inlineCode",{parentName:"p"},"Jasmine|Mocha"),".\nYou can use it like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"describe('Example', () => {\n  beforeEach(() => {\n     browser.url('https://webdriver.io');\n  });\n\n  it('should save some screenshots', () => {\n    // Save a screen\n    browser.saveScreen('examplePaged', { /* some options */ });\n\n    // Save an element\n    browser.saveElement($('#element-id'), 'firstButtonElement', { /* some options */ });\n\n    // Save a full page screenshot\n    browser.saveFullPageScreen('fullPage', { /* some options */ });\n\n    // Save a full page screenshot with all tab executions\n    browser.saveTabbablePage('save-tabbable', { /* some options, use the same options as for saveFullPageScreen */ });\n  });\n\n  it('should compare successful with a baseline', () => {\n    // Check a screen\n    expect(browser.checkScreen('examplePaged', { /* some options */ })).toEqual(0);\n\n    // Check an element\n    expect(browser.checkElement($('#element-id'), 'firstButtonElement', { /* some options */ })).toEqual(0);\n\n    // Check a full page screenshot\n    expect(browser.checkFullPageScreen('fullPage', { /* some options */ })).toEqual(0);\n\n    // Check a full page screenshot with all tab executions\n    expect(browser.checkTabbablePage('check-tabbable', { /* some options, use the same options as for checkFullPageScreen */ })).toEqual(0);\n  });\n});\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"If you run for the first time without having a baseline the ",(0,i.kt)("inlineCode",{parentName:"strong"},"check"),"-methods will reject the promise with the following warning:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"#####################################################################################\n Baseline image not found, save the actual image manually to the baseline.\n The image can be found here:\n /Users/wswebcreation/Git/wdio-image-comparison-service/.tmp/actual/desktop_chrome/examplePage-chrome-latest-1366x768.png\n If you want the module to auto save a non existing image to the baseline you\n can provide 'autoSaveBaseline: true' to the options.\n#####################################################################################\n\n")),(0,i.kt)("p",null,"This means that the current screenshot is saved in the actual folder and you ",(0,i.kt)("strong",{parentName:"p"},"manually need to copy it to your baseline"),".\nIf you instantiate ",(0,i.kt)("inlineCode",{parentName:"p"},"wdio-image-comparison-service")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"autoSaveBaseline: true")," the image will automatically be saved into the baseline folder."),(0,i.kt)("h3",{id:"webdriverio-multiremote"},"WebdriverIO MultiRemote"),(0,i.kt)("p",null,"This module now also support MultiRemote. To make this work properly make sure that you add ",(0,i.kt)("inlineCode",{parentName:"p"},"'wdio-ics:options")," to your\ncapabilities as can be seen below. This will make sure that each screenshot will have its own unique name."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"exports.config = {\n    capabilities: {\n        chromeBrowserOne: {\n            capabilities: {\n                browserName: 'chrome',\n                'goog:chromeOptions': {\n                    args: [\n                        'disable-infobars',\n                        '--headless',\n                    ],\n                },\n                // THIS!!!\n                'wdio-ics:options': {\n                    logName: 'chrome-latest-one',\n                },\n            }\n        },\n        chromeBrowserTwo: {\n            capabilities: {\n                browserName: 'chrome',\n                'goog:chromeOptions': {\n                    args: [\n                        'disable-infobars',\n                        '--headless',\n                    ],\n                },\n                // THIS!!!\n                'wdio-ics:options': {\n                    logName: 'chrome-latest-two',\n                },\n            }\n        },\n    }\n}\n")),(0,i.kt)("h3",{id:"running-programmatically"},"Running Programmatically"),(0,i.kt)("p",null,"Here is a minimal example usage of getting ",(0,i.kt)("inlineCode",{parentName:"p"},"wdio-image-comparison-service")," to work via ",(0,i.kt)("inlineCode",{parentName:"p"},"remote")," options"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const {\n  remote\n} = require(\"webdriverio\");\n\nconst WdioImageComparisonService = require('wdio-image-comparison-service').default;\n\nlet wdioImageComparisonService = new WdioImageComparisonService({});\n\nasync function main() {\n  const browser = await remote({\n    logLevel: \"silent\",\n    capabilities: {\n      browserName: \"chrome\"\n    }\n  });\n\n  global.browser = browser;\n\n  wdioImageComparisonService.defaultOptions.autoSaveBaseline = true;\n  browser.defaultOptions = wdioImageComparisonService.defaultOptions;\n  browser.folders = wdioImageComparisonService.folders;\n\n  wdioImageComparisonService.before(browser.capabilities)\n\n  await browser.url('https://webdriver.io/');\n\n  // or use this for ONLY saving a screenshot\n  await browser.saveFullPageScreen('examplePaged', {});\n\n  // or use this for validating. Both methods don't need to be combined, see the FAQ\n  await browser.checkFullPageScreen('examplePaged', {});\n\n  await browser.deleteSession();\n}\n\nmain().catch(async e => {\n  console.error(e)\n});\n")),(0,i.kt)("h3",{id:"test-result-outputs"},"Test result outputs"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"save(Screen/Element/FullPageScreen)")," methods will provide the following information after the method has been executed:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const saveResult = {\n    // The device pixel ratio of the instance that has run\n  devicePixelRatio: 1,\n  // The formatted filename, this depends on the options `formatImageName`\n  fileName: 'examplePage-chrome-latest-1366x768.png',\n  // The path where the actual screenshot file can be found\n  path: '/Users/wswebcreation/Git/wdio-image-comparison-service/.tmp/actual/desktop_chrome',\n};\n")),(0,i.kt)("p",null,"See the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/OUTPUT.md#save-output"},"Save output")," section in the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/OUTPUT.md"},"output")," docs for the images."),(0,i.kt)("p",null,"By default the ",(0,i.kt)("inlineCode",{parentName:"p"},"check(Screen/Element/FullPageScreen)")," methods will only provide a mismatch percentage like ",(0,i.kt)("inlineCode",{parentName:"p"},"1.23"),", but when the plugin has the options ",(0,i.kt)("inlineCode",{parentName:"p"},"returnAllCompareData: true")," the following information is provided after the method has been executed:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const checkResult = {\n  // The formatted filename, this depends on the options `formatImageName`\n  fileName: 'examplePage-chrome-headless-latest-1366x768.png',\n  folders: {\n      // The actual folder and the file name\n      actual: '/Users/wswebcreation/Git/wdio-image-comparison-service/.tmp/actual/desktop_chrome/examplePage-chrome-headless-latest-1366x768.png',\n      // The baseline folder and the file name\n      baseline: '/Users/wswebcreation/Git/wdio-image-comparison-service/localBaseline/desktop_chrome/examplePage-chrome-headless-latest-1366x768.png',\n      // This following folder is optional and only if there is a mismatch\n      // The folder that holds the diffs and the file name\n      diff: '/Users/wswebcreation/Git/wdio-image-comparison-service/.tmp/diff/desktop_chrome/examplePage-chrome-headless-latest-1366x768.png',\n    },\n    // The mismatch percentage\n    misMatchPercentage: 2.34\n};\n")),(0,i.kt)("p",null,"See the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/OUTPUT.md#check-output-on-failure"},"Check output on failure")," section in the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/OUTPUT.md"},"output")," docs for the images."),(0,i.kt)("h3",{id:"tabbing-through-a-website"},"Tabbing through a website"),(0,i.kt)("p",null,"We now support checking if a website is accessible through using the keyboards ",(0,i.kt)("inlineCode",{parentName:"p"},"TAB"),"-key. Testing this part of accessibility has always been a time consuming (manual) job and pretty hard to do through automation.\nWith the methods ",(0,i.kt)("inlineCode",{parentName:"p"},"saveTabbablePage")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"checkTabbablePage")," you can now draw lines and dots on your website to verify the tabbing order."),(0,i.kt)("p",null,"Be aware of the fact that this is only useful for desktop browser and ",(0,i.kt)("strong",{parentName:"p"},"NOT")," for mobile devices. All desktop browsers are supporting this feature, see the browser matrix on the top of this page to check which desktop browsers and versions are supported."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"NOTE:"),(0,i.kt)("br",null),"\nThe work is inspired by ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/vivrichards600"},"Viv Richards")," his blog post about ",(0,i.kt)("a",{parentName:"p",href:"https://vivrichards.co.uk/accessibility/automating-page-tab-flows-using-visual-testing-and-javascript"},'"AUTOMATING PAGE TABABILITY (IS THAT A WORD?) WITH VISUAL TESTING"'),".",(0,i.kt)("br",null),"\nThe way tabbable elements are selected are based on the module ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/davidtheclark/tabbable"},"tabbable"),". If there are any issues regarding the tabbing please check the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/davidtheclark/tabbable/blob/master/README.md"},"README.md")," and especially the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/davidtheclark/tabbable/blob/master/README.md#more-details"},"More details"),"-section.")),(0,i.kt)("h4",{id:"how-does-it-work"},"How does it work"),(0,i.kt)("p",null,"Both methods will create a ",(0,i.kt)("inlineCode",{parentName:"p"},"canvas")," element on your website and draw lines and dots to show you where your TAB would go if an end-user would use it. After that it will create a full page screenshot to give you a good overview of the flow."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Use the ",(0,i.kt)("inlineCode",{parentName:"strong"},"saveTabbablePage")," only when you need to create a screenshot and DON'T want to compare it with a base line image."))),(0,i.kt)("p",null,"When you want to compare the tabbing flow with a baseline, then you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"checkTabbablePage"),"-method. You ",(0,i.kt)("strong",{parentName:"p"},"DON'T")," need to use the two methods together. If there is already a baseline image created, which can automatically be done by providing ",(0,i.kt)("inlineCode",{parentName:"p"},"autoSaveBaseline: true")," when you instantiate the service,\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"checkTabbablePage")," will first create the ",(0,i.kt)("em",{parentName:"p"},"actual")," image and then compare it against the baseline."),(0,i.kt)("h5",{id:"options"},"Options"),(0,i.kt)("p",null,"Both methods use the same options as the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/webdriver-image-comparison/blob/master/docs/OPTIONS.md#savefullpagescreen-or-savetabbablepage"},(0,i.kt)("inlineCode",{parentName:"a"},"saveFullPageScreen"))," or the\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/webdriver-image-comparison/blob/master/docs/OPTIONS.md#comparefullpagescreen-or-comparetabbablepage"},(0,i.kt)("inlineCode",{parentName:"a"},"compareFullPageScreen")),"."),(0,i.kt)("h4",{id:"example"},"Example"),(0,i.kt)("p",null,"This is an example of how the tabbing works on the website of our amazing sponsor ",(0,i.kt)("a",{parentName:"p",href:"https://www.saucelabs.com"},"Sauce Labs"),":"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/images/tabbable-sauce-labs-chrome-latest-1366x768.png",alt:"Sauce Labs tabbing example"})),(0,i.kt)("h3",{id:"dev-tools-support"},"DEV-TOOLS support"),(0,i.kt)("p",null,"You can also use the Chrome DevTools as automation protocol in combination with this module. You don't need to do anything,\njust change ",(0,i.kt)("inlineCode",{parentName:"p"},"automationProtocol: 'devtools'")," in your config.\nMore information about how to use the DEV-TOOLS can be found in ",(0,i.kt)("a",{parentName:"p",href:"https://webdriver.io/blog/2019/09/16/devtools.html"},"this")," blog post."),(0,i.kt)("h3",{id:"typescript-support"},"Typescript support"),(0,i.kt)("p",null,"We now also support typescript types. Add the following to the ",(0,i.kt)("inlineCode",{parentName:"p"},"types")," in your ",(0,i.kt)("inlineCode",{parentName:"p"},"tsconfig.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "compilerOptions": {\n    "types": [\n      "wdio-image-comparison-service"\n    ]\n  }\n}\n')),(0,i.kt)("h2",{id:"faq"},"FAQ"),(0,i.kt)("h3",{id:"do-i-need-to-use-a-savescreenelementfullpagescreen-methods-when-i-want-to-run-checkscreenelementfullpagescreen"},"Do I need to use a ",(0,i.kt)("inlineCode",{parentName:"h3"},"save(Screen/Element/FullPageScreen)")," methods when I want to run ",(0,i.kt)("inlineCode",{parentName:"h3"},"check(Screen/Element/FullPageScreen)"),"?"),(0,i.kt)("p",null,"No, you don't need to do this. The ",(0,i.kt)("inlineCode",{parentName:"p"},"check(Screen/Element/FullPageScreen)")," will do this automatically for you"),(0,i.kt)("h3",{id:"width-and-height-cannot-be-negative"},"Width and height cannot be negative"),(0,i.kt)("p",null,"It could be that the error ",(0,i.kt)("inlineCode",{parentName:"p"},"Width and height cannot be negative")," is thrown. 9 out of 10 times this is related to creating an image of an element that is not in the view. Please be sure you always make sure the element in is in the view before you try to make an image of the element."),(0,i.kt)("h3",{id:"installation-of-canvas-on-windows-failed-with-node-gyp-logs"},"Installation of Canvas on Windows failed with Node-Gyp logs"),(0,i.kt)("p",null,"Canvas uses Node-Gyp and might cause some issues on Windows that are not fully set up. Please check ",(0,i.kt)("a",{parentName:"p",href:"https://spin.atomicobject.com/2019/03/27/node-gyp-windows/"},"this post")," for Fixing Node-Gyp Issues on Windows. (Thanks to ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/IgorSasovets"},"IgorSasovets"),")"),(0,i.kt)("h2",{id:"contribution"},"Contribution"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/CONTRIBUTING.md"},"CONTRIBUTING.md"),"."),(0,i.kt)("h2",{id:"todo"},"TODO:"),(0,i.kt)("ul",{className:"contains-task-list"},(0,i.kt)("li",{parentName:"ul",className:"task-list-item"},(0,i.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","fix the scroll-bar for Android, sometimes it shows"),(0,i.kt)("li",{parentName:"ul",className:"task-list-item"},(0,i.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","create a new website")),(0,i.kt)("h2",{id:"credits"},"Credits"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"wdio-image-comparison-service")," uses an open source licence from Sauce Labs.\n",(0,i.kt)("img",{parentName:"p",src:"https://github.com/wswebcreation/wdio-image-comparison-service/blob/master/./docs/images/powered-by-saucelabs.png",alt:"Powered by Sauce Labs"})),(0,i.kt)("p",null,"You can request your open source licence ",(0,i.kt)("a",{parentName:"p",href:"https://saucelabs.com/open-source/open-sauce"},"here")))}u.isMDXComponent=!0}}]);