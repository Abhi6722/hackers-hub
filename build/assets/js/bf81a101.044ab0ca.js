"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7070],{4137:function(e,t,r){r.d(t,{Zo:function(){return p},kt:function(){return m}});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=u(r),m=i,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return r?n.createElement(h,a(a({ref:t},p),{},{components:r})):n.createElement(h,a({ref:t},p))}));function m(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=r[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8448:function(e,t,r){var n=r(7294);t.Z=function(e){var t=e.children,r=e.hidden,i=e.className;return n.createElement("div",{role:"tabpanel",hidden:r,className:i},t)}},7225:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(7462),i=r(7294),o=r(1048),a=r(2713);var l=function(){var e=(0,i.useContext)(a.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},s=r(3309),u=r(6010),p="tabItem_vU9c";function d(e){var t,r,n,o=e.lazy,a=e.block,d=e.defaultValue,c=e.values,m=e.groupId,h=e.className,f=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=c?c:f.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),v=(0,s.lx)(k,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var g=null===d?d:null!=(t=null!=d?d:null==(r=f.find((function(e){return e.props.default})))?void 0:r.props.value)?t:null==(n=f[0])?void 0:n.props.value;if(null!==g&&!k.some((function(e){return e.value===g})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+g+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=l(),b=w.tabGroupChoices,N=w.setTabGroupChoices,y=(0,i.useState)(g),C=y[0],T=y[1],x=[],A=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=m){var E=b[m];null!=E&&E!==C&&k.some((function(e){return e.value===E}))&&T(E)}var D=function(e){var t=e.currentTarget,r=x.indexOf(t),n=k[r].value;n!==C&&(A(t),T(n),null!=m&&N(m,n))},O=function(e){var t,r=null;switch(e.key){case"ArrowRight":var n=x.indexOf(e.currentTarget)+1;r=x[n]||x[0];break;case"ArrowLeft":var i=x.indexOf(e.currentTarget)-1;r=x[i]||x[x.length-1]}null==(t=r)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,u.Z)("tabs",{"tabs--block":a},h)},k.map((function(e){var t=e.value,r=e.label;return i.createElement("li",{role:"tab",tabIndex:C===t?0:-1,"aria-selected":C===t,className:(0,u.Z)("tabs__item",p,{"tabs__item--active":C===t}),key:t,ref:function(e){return x.push(e)},onKeyDown:O,onFocus:D,onClick:D},null!=r?r:t)}))),o?(0,i.cloneElement)(f.filter((function(e){return e.props.value===C}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==C})}))))}function c(e){var t=(0,o.Z)();return i.createElement(d,(0,n.Z)({key:String(t)},e))}},2713:function(e,t,r){var n=(0,r(7294).createContext)(void 0);t.Z=n},6506:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return c}});var n=r(7462),i=r(3366),o=(r(7294),r(4137)),a=(r(7225),r(8448),["components"]),l={id:"wdio-video-reporter",title:"Video Reporter",custom_edit_url:"https://github.com/presidenten/wdio-video-reporter/edit/master//README.md"},s=void 0,u={unversionedId:"wdio-video-reporter",id:"wdio-video-reporter",isDocsHomePage:!1,title:"Video Reporter",description:"wdio-video-reporter is a 3rd party package, for more information please see GitHub | npm",source:"@site/docs/_wdio-video-reporter.md",sourceDirName:".",slug:"/wdio-video-reporter",permalink:"/docs/wdio-video-reporter",editUrl:"https://github.com/presidenten/wdio-video-reporter/edit/master//README.md",tags:[],version:"current",frontMatter:{id:"wdio-video-reporter",title:"Video Reporter",custom_edit_url:"https://github.com/presidenten/wdio-video-reporter/edit/master//README.md"},sidebar:"docs",previous:{title:"Report Portal Reporter",permalink:"/docs/wdio-reportportal-reporter"},next:{title:"HTML Reporter",permalink:"/docs/rpii-wdio-html-reporter"}},p=[{value:"Install the reporter",id:"install-the-reporter",children:[],level:2},{value:"Add the reporter to config",id:"add-the-reporter-to-config",children:[],level:2},{value:"Using with Allure",id:"using-with-allure",children:[],level:2},{value:"Normal configuration parameters",id:"normal-configuration-parameters",children:[],level:2},{value:"Advanced configuration parameters",id:"advanced-configuration-parameters",children:[],level:2},{value:"Cucumber support",id:"cucumber-support",children:[],level:2},{value:"Appium setup",id:"appium-setup",children:[],level:2}],d={toc:p};function c(e){var t=e.components,r=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"wdio-video-reporter is a 3rd party package, for more information please see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/presidenten/wdio-video-reporter"},"GitHub")," | ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/wdio-video-reporter"},"npm"))),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/presidenten/wdio-video-reporter-example-report/master/wdio-video-reporter.png",alt:"Logo"})),(0,o.kt)("p",null,"This is a reporter for ",(0,o.kt)("a",{parentName:"p",href:"https://webdriver.io/"},"Webdriver IO v6 and highr")," that generates videos of your wdio test executions. If you use allure, then the test cases automatically get decorated with the videos as well. (For Webdriver IO v5, please use wdio-video-reporter version ^2.0.0.)"),(0,o.kt)("p",null,"Videos ends up in ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio.config.outputDir")),(0,o.kt)("p",null,"Checkout example Allure report with included videos on failed tests here:\n",(0,o.kt)("a",{parentName:"p",href:"https://presidenten.github.io/wdio-video-reporter-example-report/"},"https://presidenten.github.io/wdio-video-reporter-example-report/")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://media.giphy.com/media/7Fgle7bHGrxR3zY6Gw/giphy.gif",alt:"example-allure-report"})),(0,o.kt)("p",null,"Pros:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Nice videos in your allure reports"),(0,o.kt)("li",{parentName:"ul"},"Nice human speed videos, even though tests are fast"),(0,o.kt)("li",{parentName:"ul"},"Works with Selenium grid"),(0,o.kt)("li",{parentName:"ul"},"Works with all webdrivers that support ",(0,o.kt)("inlineCode",{parentName:"li"},"saveScreenshot")),(0,o.kt)("li",{parentName:"ul"},"Verified on the following Deskop browsers using Selenium 3.141.59:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Chrome"),(0,o.kt)("li",{parentName:"ul"},"Firefox"),(0,o.kt)("li",{parentName:"ul"},"Safari"),(0,o.kt)("li",{parentName:"ul"},"Internet Explorer 11"),(0,o.kt)("li",{parentName:"ul"},"Microsoft Edge"))),(0,o.kt)("li",{parentName:"ul"},"Verified on the following ios and android devices with ",(0,o.kt)("a",{parentName:"li",href:"http://appium.io/docs/en/about-appium/getting-started/"},"Appium")," 1.13.0-beta3:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Iphone 8"),(0,o.kt)("li",{parentName:"ul"},"Ipad Gen 6"),(0,o.kt)("li",{parentName:"ul"},"Samsung galaxy S9"),(0,o.kt)("li",{parentName:"ul"},"Samsung galaxy tab A10")))),(0,o.kt)("p",null,"Cons:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'Works by taking screenshots after "actions", which makes the tests a little bit slower. This is mitigated by carefully choosing which ',(0,o.kt)("a",{parentName:"li",href:"https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol"},"jsonWireProtocol")," messages that should result in a screenshot"),(0,o.kt)("li",{parentName:"ul"},"Selenium drivers doesn't include alert-boxes and popups in screenshots, so they are not visible in the videos")),(0,o.kt)("h1",{id:"quick-start"},"Quick start"),(0,o.kt)("p",null,"Checkout the simple template at ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/presidenten/wdio-template"},"wdio-template")," to quickly get up to speed."),(0,o.kt)("p",null,"Clone one of the repositories and install dependencies with ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"npm install"),". Then run ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn e2e")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run e2e")," in demo directory and finally ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn report")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"npm run report")," to see allure report."),(0,o.kt)("h1",{id:"installation"},"Installation"),(0,o.kt)("h2",{id:"install-the-reporter"},"Install the reporter"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"yarn add wdio-video-reporter"),"\nor\n",(0,o.kt)("inlineCode",{parentName:"p"},"npm install wdio-video-reporter")),(0,o.kt)("h2",{id:"add-the-reporter-to-config"},"Add the reporter to config"),(0,o.kt)("p",null,"At the top of the ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio.conf.js"),"-file, require the library:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"const video = require('wdio-video-reporter');\n")),(0,o.kt)("p",null,"Then add the video reporter to the configuration in the reporters property:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," reporters: [\n    [video, {\n      saveAllVideos: false,       // If true, also saves videos for successful test cases\n      videoSlowdownMultiplier: 3, // Higher to get slower videos, lower for faster videos [Value 1-100]\n    }],\n  ],\n")),(0,o.kt)("h2",{id:"using-with-allure"},"Using with Allure"),(0,o.kt)("p",null,"Adding the Allure reporter as well, automatically updates the reports with videos without any need to configure anything :-)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"}," reporters: [\n    [video, {\n      saveAllVideos: false,       // If true, also saves videos for successful test cases\n      videoSlowdownMultiplier: 3, // Higher to get slower videos, lower for faster videos [Value 1-100]\n    }],\n    ['allure', {\n      outputDir: './_results_/allure-raw',\n      disableWebdriverStepsReporting: true,\n      disableWebdriverScreenshotsReporting: true,\n    }],\n  ],\n")),(0,o.kt)("h1",{id:"configuration"},"Configuration"),(0,o.kt)("h2",{id:"normal-configuration-parameters"},"Normal configuration parameters"),(0,o.kt)("p",null,"Most users may want to set these"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"saveAllVideos")," Set to true to save videos for passing tests. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: false")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"videoSlowdownMultiplier")," Integer between ","[1-100]",". Increase if videos are playing to quick. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: 3")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"videoRenderTimeout")," Max seconds to wait for a video to render. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: 5")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"outputDir")," If its not set, it uses wdio.config.outputDir. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: undefined")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"outputDir")," If its not set, it uses wdio.config.outputDir. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: undefined")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"maxTestNameCharacters")," Max length of test name. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: 250"))),(0,o.kt)("h2",{id:"advanced-configuration-parameters"},"Advanced configuration parameters"),(0,o.kt)("p",null,"Advanced users who want to change when the engine makes a screengrab can edit these. These arrays may be populated with the last word of a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/SeleniumHQ/selenium/wiki/JsonWireProtocol"},"jsonWireProtocol")," message, i.e. /session/:sessionId/",(0,o.kt)("inlineCode",{parentName:"p"},"buttondown"),"."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"addExcludedActions")," Add actions where screenshots are unnecessary. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: []")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"addJsonWireActions")," Add actions where screenshots are missing. ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: []")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"recordAllActions")," Skip filtering and screenshot everything. (Not recommended) ",(0,o.kt)("inlineCode",{parentName:"li"},"Default: false"))),(0,o.kt)("p",null,"To see processed messages, set ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio.config.logLevel: 'debug'")," and check ",(0,o.kt)("inlineCode",{parentName:"p"},"outputDir/wdio-X-Y-Video-reporter.log"),". This will also leave the screenshots output directory intact for review"),(0,o.kt)("p",null,"To avoid extra logging all together and only get the video files, set ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio.config.logLevel: 'silent'"),"."),(0,o.kt)("h2",{id:"cucumber-support"},"Cucumber support"),(0,o.kt)("p",null,"If you are using the Allure reporter, you need to ensure you do the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("inlineCode",{parentName:"li"},"chai")," instead of using the built-in node assertions otherwise the failed tests gets reported as broken in your steps definitions"),(0,o.kt)("li",{parentName:"ul"},"Add ",(0,o.kt)("inlineCode",{parentName:"li"},"useCucumberStepReporter: true")," to Allure option in ",(0,o.kt)("inlineCode",{parentName:"li"},"wdio.conf.js")," file, a typical configuration would look like this:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  reporters: [\n    [video, {\n      saveAllVideos: false,       // If true, also saves videos for successful test cases\n      videoSlowdownMultiplier: 3, // Higher to get slower videos, lower for faster videos [Value 1-100]\n    }],\n    ['allure', {\n      outputDir: './_results_/allure-raw',\n      disableWebdriverStepsReporting: true,\n      disableWebdriverScreenshotsReporting: true,\n      useCucumberStepReporter: true\n    }],\n  ],\n")),(0,o.kt)("p",null,"For a complete example, checkout the cucumber branch at the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/presidenten/wdio-template/tree/cucumber"},"wdio-template")),(0,o.kt)("h2",{id:"appium-setup"},"Appium setup"),(0,o.kt)("p",null,"Since ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio-video-reporter")," v1.2.4 there is support to help Allure differentiate between safari and chrome browsers on desktop and devices.\nThe reporter uses the custom property ",(0,o.kt)("inlineCode",{parentName:"p"},"deviceType")," to id the different devices.\nRecommended values are ",(0,o.kt)("inlineCode",{parentName:"p"},"phone")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"tablet"),".\nIt is recommended to include ",(0,o.kt)("inlineCode",{parentName:"p"},"browserVersion")," as well for ",(0,o.kt)("em",{parentName:"p"},"all")," browsers to avoid a bug in Chrome webdriver when using devices in same Selenium grid as desktop Chrome browsers."),(0,o.kt)("p",null,"The generated video files will also get ",(0,o.kt)("inlineCode",{parentName:"p"},"deviceType")," added to the browser name."),(0,o.kt)("p",null,"Example appium configuration:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'  "capabilities": [\n    {\n      ...\n      "deviceType": "phone",\n      "browserVersion": "73.0-phone-1",\n      ...\n    }\n  ],\n')),(0,o.kt)("p",null,"And ",(0,o.kt)("inlineCode",{parentName:"p"},"wdio-config.json"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'  "capabilities": [\n    {\n      ...\n      "appium:deviceType": "phone",\n      "browserVersion": "73.0-phone-1",\n      ...\n    },\n  ],\n')),(0,o.kt)("h1",{id:"contributing"},"Contributing"),(0,o.kt)("p",null,"Fork, make changes, write some tests, lint, run tests, build, and verify in the demo that changes work as they should, then make a PR."),(0,o.kt)("p",null,"The demo folder works with the built version of the library, so make sure to build if you added new features and want to try them out."),(0,o.kt)("h1",{id:"thanks"},"Thanks"),(0,o.kt)("p",null,"Thanks to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/jonn-set"},"Johnson E")," for fixing Cucumber support which alot of users have asked for."))}c.isMDXComponent=!0}}]);