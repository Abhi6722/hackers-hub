"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3977],{4137:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var s=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=s.createContext({}),c=function(e){var t=s.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return s.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},d=s.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=i,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||a;return n?s.createElement(f,r(r({ref:t},u),{},{components:n})):s.createElement(f,r({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,r[1]=o;for(var c=2;c<a;c++)r[c]=n[c];return s.createElement.apply(null,r)}return s.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6999:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var s=n(7462),i=n(3366),a=(n(7294),n(4137)),r=["components"],o={id:"organizingsuites",title:"Organizing Test Suite"},l=void 0,c={unversionedId:"organizingsuites",id:"organizingsuites",isDocsHomePage:!1,title:"Organizing Test Suite",description:"As projects grow, inevitably more and more integration tests are added. This increases build time and slows productivity.",source:"@site/docs/OrganizingTestSuites.md",sourceDirName:".",slug:"/organizingsuites",permalink:"/docs/organizingsuites",editUrl:"https://github.com/Abhi6722/hackers-hub/edit/main/website/docs/OrganizingTestSuites.md",tags:[],version:"current",frontMatter:{id:"organizingsuites",title:"Organizing Test Suite"},sidebar:"docs",previous:{title:"Assertion",permalink:"/docs/assertion"},next:{title:"Retry Flaky Tests",permalink:"/docs/retry"}},u=[{value:"Inherit From Main Config File",id:"inherit-from-main-config-file",children:[],level:2},{value:"Grouping Test Specs In Suites",id:"grouping-test-specs-in-suites",children:[],level:2},{value:"Grouping Test Specs To Run Sequentially",id:"grouping-test-specs-to-run-sequentially",children:[],level:2},{value:"Run Selected Tests",id:"run-selected-tests",children:[],level:2},{value:"Exclude Selected Tests",id:"exclude-selected-tests",children:[],level:2},{value:"Run Suites and Test Specs",id:"run-suites-and-test-specs",children:[],level:2},{value:"Run Multiple, Specific Test Specs",id:"run-multiple-specific-test-specs",children:[],level:2},{value:"Running Specific Tests with MochaOpts",id:"running-specific-tests-with-mochaopts",children:[],level:2},{value:"Stop testing after failure",id:"stop-testing-after-failure",children:[],level:2}],p={toc:u};function d(e){var t=e.components,n=(0,i.Z)(e,r);return(0,a.kt)("wrapper",(0,s.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"As projects grow, inevitably more and more integration tests are added. This increases build time and slows productivity."),(0,a.kt)("p",null,"To prevent this, you should run your tests in parallel. WebdriverIO already tests each spec (or ",(0,a.kt)("em",{parentName:"p"},"feature file")," in Cucumber) in parallel within a single session. In general, try to test a only a single feature per spec file. Try to not have too many or too few tests in one file. (However, there is no golden rule here.)"),(0,a.kt)("p",null,"Once your tests have several spec files, you should start running your tests concurrently. To do so, adjust the ",(0,a.kt)("inlineCode",{parentName:"p"},"maxInstances")," property in your config file. WebdriverIO allows you to run your tests with maximum concurrency\u2014meaning that no matter how many files and tests you have, they can all run in parallel.  (This is still subject to certain limits, like your computer\u2019s CPU, concurrency restrictions, etc.)"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Let's say you have 3 different capabilities (Chrome, Firefox, and Safari) and you have set ",(0,a.kt)("inlineCode",{parentName:"p"},"maxInstances")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),". The WDIO test runner will spawn 3 processes. Therefore, if you have 10 spec files and you set ",(0,a.kt)("inlineCode",{parentName:"p"},"maxInstances")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"10"),", ",(0,a.kt)("em",{parentName:"p"},"all")," spec files will be tested simultaneously, and 30 processes will be spawned.")),(0,a.kt)("p",null,"You can define the ",(0,a.kt)("inlineCode",{parentName:"p"},"maxInstances")," property globally to set the attribute for all browsers."),(0,a.kt)("p",null,"If you run your own WebDriver grid, you may (for example) have more capacity for one browser than another. In that case, you can ",(0,a.kt)("em",{parentName:"p"},"limit")," the ",(0,a.kt)("inlineCode",{parentName:"p"},"maxInstances")," in your capability object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// wdio.conf.js\nexports.config = {\n    // ...\n    // set maxInstance for all browser\n    maxInstances: 10,\n    // ...\n    capabilities: [{\n        browserName: 'firefox'\n    }, {\n        // maxInstances can get overwritten per capability. So if you have an in-house WebDriver\n        // grid with only 5 firefox instance available you can make sure that not more than\n        // 5 instance gets started at a time.\n        browserName: 'chrome'\n    }],\n    // ...\n}\n")),(0,a.kt)("h2",{id:"inherit-from-main-config-file"},"Inherit From Main Config File"),(0,a.kt)("p",null,"If you run your test suite in multiple environments (e.g., dev and integration) it may help to use multiple configuration files to keep things manageable."),(0,a.kt)("p",null,"Similar to the ",(0,a.kt)("a",{parentName:"p",href:"/docs/pageobjects"},"page object concept"),", the first thing you\u2019ll need is a main config file. It contains all configurations you share across environments."),(0,a.kt)("p",null,"Then create another config file for each environment, and supplement the the main config with the environment-specific ones:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// wdio.dev.config.js\nimport merge from 'deepmerge'\nimport wdioConf from './wdio.conf.js'\n\n// have main config file as default but overwrite environment specific information\nexports.config = merge(wdioConf.config, {\n    capabilities: [\n        // more caps defined here\n        // ...\n    ],\n\n    // run tests on sauce instead locally\n    user: process.env.SAUCE_USERNAME,\n    key: process.env.SAUCE_ACCESS_KEY,\n    services: ['sauce']\n}, { clone: false })\n\n// add an additional reporter\nexports.config.reporters.push('allure')\n")),(0,a.kt)("h2",{id:"grouping-test-specs-in-suites"},"Grouping Test Specs In Suites"),(0,a.kt)("p",null,"You can easily group test specs in suites and run single specific suites instead of all of them."),(0,a.kt)("p",null,"First, define your suites in your WDIO config:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// wdio.conf.js\nexports.config = {\n    // define all tests\n    specs: ['./test/specs/**/*.spec.js'],\n    // ...\n    // define specific suites\n    suites: {\n        login: [\n            './test/specs/login.success.spec.js',\n            './test/specs/login.failure.spec.js'\n        ],\n        otherFeature: [\n            // ...\n        ]\n    },\n    // ...\n}\n")),(0,a.kt)("p",null,"Now, if you want to only run a single suite, you can pass the suite name as a CLI argument:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --suite login\n")),(0,a.kt)("p",null,"Or, run multiple suites at once:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --suite login --suite otherFeature\n")),(0,a.kt)("h2",{id:"grouping-test-specs-to-run-sequentially"},"Grouping Test Specs To Run Sequentially"),(0,a.kt)("p",null,"As described above, there are benefits in running the tests concurrently.  However, there are cases where it would be beneficial to group tests together to run sequentially in a single instance.  Examples of this are mainly where there is a large setup cost e.g. transpiling code or provisioning cloud instances, but there are also advanced usage models that benefit from this capability."),(0,a.kt)("p",null,"To group tests to run in a single instance, simply define them as an array within the specs definition."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'    "specs": [\n        [\n            "./test/specs/test_login.js",\n            "./test/specs/test_product_order.js",\n            "./test/specs/test_checkout.js"\n        ],\n        "./test/specs/test_b*.js",\n    ],\n')),(0,a.kt)("p",null,"In the example above, the tests 'test_login.js', 'test_product_order.js' and 'test_checkout.js' will be run sequentially in a single instance and each of the \"test_b*\" tests will run concurrently in individual instances."),(0,a.kt)("p",null,"It is also possible to group specs defined in suites, so you can now also define suites like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'    "suites": {\n        end2end: [\n            [\n                "./test/specs/test_login.js",\n                "./test/specs/test_product_order.js",\n                "./test/specs/test_checkout.js"\n            ]\n        ],\n        allb: ["./test/specs/test_b*.js"]\n},\n')),(0,a.kt)("p",null,'and in this case all of the tests of the "end2end" suite would be run in a single instance.'),(0,a.kt)("h2",{id:"run-selected-tests"},"Run Selected Tests"),(0,a.kt)("p",null,"In some cases, you may wish to only execute a single test (or subset of tests) of your suites."),(0,a.kt)("p",null,"With the ",(0,a.kt)("inlineCode",{parentName:"p"},"--spec")," parameter, you can specify which ",(0,a.kt)("em",{parentName:"p"},"suite")," (Mocha, Jasmine) or ",(0,a.kt)("em",{parentName:"p"},"feature")," (Cucumber) should be run."),(0,a.kt)("p",null,"For example, to run only your login test:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --spec ./test/specs/e2e/login.js\n")),(0,a.kt)("p",null,"Or run multiple specs at once:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --spec ./test/specs/signup.js --spec ./test/specs/forgot-password.js\n")),(0,a.kt)("p",null,"If the ",(0,a.kt)("inlineCode",{parentName:"p"},"--spec")," value does not point to a particular spec file, it is instead used to filter the spec filenames defined in your configuration."),(0,a.kt)("p",null,"To run all specs with the word \u201cdialog\u201d in the spec file names, you could use:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --spec dialog\n")),(0,a.kt)("p",null,"Note that each test file is running in a single test runner process. Since we don't scan files in advance (see the next section for information on piping filenames to ",(0,a.kt)("inlineCode",{parentName:"p"},"wdio"),"), you ",(0,a.kt)("em",{parentName:"p"},"can't")," use (for example) ",(0,a.kt)("inlineCode",{parentName:"p"},"describe.only")," at the top of your spec file to instruct Mocha to run only that suite."),(0,a.kt)("p",null,"This feature will help you to accomplish the same goal."),(0,a.kt)("h2",{id:"exclude-selected-tests"},"Exclude Selected Tests"),(0,a.kt)("p",null,"When needed, if you need to exclude particular spec file(s) from a run, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"--exclude")," parameter (Mocha, Jasmine) or feature (Cucumber)."),(0,a.kt)("p",null,"For example, to exclude your login test from the test run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --exclude ./test/specs/e2e/login.js\n")),(0,a.kt)("p",null,"Or, exclude multiple spec files:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --exclude ./test/specs/signup.js --exclude ./test/specs/forgot-password.js\n")),(0,a.kt)("p",null,"Or, exclude a spec file when filtering using a suite:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --suite login --exclude ./test/specs/e2e/login.js\n")),(0,a.kt)("h2",{id:"run-suites-and-test-specs"},"Run Suites and Test Specs"),(0,a.kt)("p",null,"Run an entire suite along with individual specs."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"wdio wdio.conf.js --suite login --spec ./test/specs/signup.js\n")),(0,a.kt)("h2",{id:"run-multiple-specific-test-specs"},"Run Multiple, Specific Test Specs"),(0,a.kt)("p",null,"It is sometimes necessary","\u2014","in the context of continuous integration and otherwise","\u2014","to specify multiple sets of specs to run. WebdriverIO's ",(0,a.kt)("inlineCode",{parentName:"p"},"wdio")," command line utility accepts piped-in filenames (from ",(0,a.kt)("inlineCode",{parentName:"p"},"find"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"grep"),", or others)."),(0,a.kt)("p",null,"Piped-in filenames override the list of globs or filenames specified in the configuration's ",(0,a.kt)("inlineCode",{parentName:"p"},"spec")," list."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'grep -r -l --include "*.js" "myText" | wdio wdio.conf.js\n')),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},(0,a.kt)("strong",{parentName:"em"},"Note:")," This will")," not ",(0,a.kt)("em",{parentName:"p"},"override the ",(0,a.kt)("inlineCode",{parentName:"em"},"--spec")," flag for running a single spec.")),(0,a.kt)("h2",{id:"running-specific-tests-with-mochaopts"},"Running Specific Tests with MochaOpts"),(0,a.kt)("p",null,"You can also filter which specific ",(0,a.kt)("inlineCode",{parentName:"p"},"suite|describe")," and/or ",(0,a.kt)("inlineCode",{parentName:"p"},"it|test")," you want to run by passing a mocha specific argument: ",(0,a.kt)("inlineCode",{parentName:"p"},"--mochaOpts.grep")," to the wdio CLI."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'wdio wdio.conf.js --mochaOpts.grep myText\nwdio wdio.conf.js --mochaOpts.grep "Text with spaces"\n')),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},(0,a.kt)("strong",{parentName:"em"},"Note:")," Mocha will filter the tests after the WDIO test runner creates the instances, so you might see several instances being spawned but not actually executed.")),(0,a.kt)("h2",{id:"stop-testing-after-failure"},"Stop testing after failure"),(0,a.kt)("p",null,"With the ",(0,a.kt)("inlineCode",{parentName:"p"},"bail")," option, you can tell WebdriverIO to stop testing after any test fails."),(0,a.kt)("p",null,"This is helpful with large test suites when you already know that your build will break, but you want to avoid the lengthy wait of a full testing run."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"bail")," option expects a number, which specifies how many test failures can occur before WebDriver stop the entire testing run. The default is ",(0,a.kt)("inlineCode",{parentName:"p"},"0"),", meaning that it always runs all tests specs it can find."),(0,a.kt)("p",null,"Please see ",(0,a.kt)("a",{parentName:"p",href:"/docs/options"},"Options Page")," for additional information on the bail configuration."))}d.isMDXComponent=!0}}]);